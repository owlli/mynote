# 正则表达式和通配符

正则表达式和通配符不是同一个概念,不要混淆,但它们部分符号代表的含义相同,通配符是bash操作界面的一个功能,比如ls不支持正则表达式但是支持[],*,?等通配符的使用.支持正则表达式的命令有grep,sed,awk等

[TOC]



## 1.通配符

### 1.常用的通配符

`*`		代表0到无穷多的任意字符，注意：文件名前的.和路径中的/必须显式匹配

`?`		代表一定有一个任意字符

`[]`		代表一定有一个中括号内的字符，比如[abc]代表一定有一个字符是abc中的任意一个，注意：前面介绍的*和?如果在中括号内就失去通配符的意义
`[-]`	-号的两边为数字或字母，比如[0-9]、[a-z]，和上面意义相同

`[^]`或`[!]`	代表一定有一个字符，只要不是^/!号后面的字符就可以



### 2.shell下通配符转换方式的理解

以

```shell
ls [a-z]*
```

为例,

shell先对通配符进行匹配，如果没有匹配项则直接查找文件名为'[a-z]*'的文件



## 2.正则表达式

正则表达式有很多种,linux下常见的有3种,每种使用转义字符和语法略有不同:

1. 基本的正则表达式(Basic Regular Expression 又叫 Basic RegEx  简称 BREs)
2. 扩展的正则表达式(Extended Regular Expression 又叫 Extended RegEx 简称 EREs)
3. Perl 的正则表达式(Perl Regular Expression 又叫 Perl RegEx 简称 PREs)

在正则表达式中
`.`		代表除换行符外任意一个字符

`*`		前面必须有一个字符，代表重复前一个字符0到无穷多次，和`{0,}`相同,如果是0就是空字符

`+`		前面必须有一个字符,代表重复前一个字符1到无穷多次,和`{1,}`相同

`?`		重复前面字符0次或1次,和`{0,1}`相同,还可以表示非贪心匹配,比如有字符串a==b===b====b,`a.*b`匹配的是a==b===b====b,`a.*?b`匹配的是a==b

`[]`		代表一定有一个中括号内的字符，比如[abc]代表一定有一个字符是abc中的任意一个,[]里的()会被当做普通字符处理

`[-]` 	-号的两边为数字或字母，比如[0-9]、[a-z]，和上面意义相同

`[^]`	代表一定有一个字符，只要不是^号后面的字符就可以

`()`		将括号内的字符串当做一个整体,字符串不需要加双引号,里面的字符串是一个整体,比如(ab){1,3}代表匹配ab这个字符串1到3次

`(|)`	匹配多个字符串,每个字符串用|隔开

**`grep`,`find -iregex`和`sed`默认是使用BREs,在{},(),|,+,?符号前加\转义才有效,否则命令解析时会把这些特殊符号当做普通字符处理**

`^`		行首之前的字符，在行处理的正则表达式中也代表最前一行

`$`		行尾之后的字符，在行处理的正则表达式中也代表最后一行

`{}`		花括号内必须有一个数字或用,号隔开的多个数字，数字代表前一个字符出现的次数，如果只有一个数字n且在其后加了,号，代表匹配n个此字符及n以上个此字符，因为在shell中{}具有特殊含义，所以在正则表达式中需要在花括号前加转义字符\，例子如下：

> `\{n\}`	匹配前面字符出现n次
>
> `\{n,\}`	匹配前面字符至少出现n次
>
> `\{n,m\}`	匹配前面字符出现n~m次

`\s`		空格

`\S`		非空格

`\d`		数字

`\D`		非数字

`\w`		字符(字母,数字,下划线)

`\W`		非字符

### 1.正则表达式的特殊符号

因为字符编码的不同，不同语系会造成正则表达式获取资料的差异，因此建议用特殊符号代替编码范围

> 特殊符號		代表意義
>
> [:alnum:]	代表英文大小寫字元及數字，亦即 0-9, A-Z, a-z
>
> [:alpha:]		代表任何英文大小寫字元，亦即 A-Z, a-z
>
> [:blank:]		代表空白鍵與 [Tab] 按鍵兩者
>
> [:cntrl:]		代表鍵盤上面的控制按鍵，亦即包括 CR, LF, Tab, Del.. 等等
>
> [:digit:]		代表數字而已，亦即 0-9
>
> [:graph:]		除了空白字元 (空白鍵與 [Tab] 按鍵) 外的其他所有按鍵
>
> [:lower:]		代表小寫字元，亦即 a-z
>
> [:print:]		代表任何可以被列印出來的字元
>
> [:punct:]		代表標點符號 (punctuation symbol)，亦即：" ' ? ! ; : # $...
>
> [:upper:]		代表大寫字元，亦即 A-Z
>
> [:space:]		任何會產生空白的字元，包括空白鍵, [Tab], CR 等等
>
> [:xdigit:]		代表 16 進位的數字類型，因此包括： 0-9, A-F, a-f 的數字與字元

[:alnum:],[:alpha:],[:digit:],[:lower:],[:upper:]为常用

**因为它们代表的只是 0-9 这样的字符，所以在使用的时候一定要用中括号括起来，如[[:digit:]]**



**常见的几种正则表达式比较(复制的,没有经过验证)**

| 字符       | 说明                                                         | Basic RegEx                             | Extended RegEx                                               | python RegEx      | Perl regEx                                                 |
| ---------- | ------------------------------------------------------------ | --------------------------------------- | ------------------------------------------------------------ | ----------------- | ---------------------------------------------------------- |
| 转义       |                                                              | \                                       | \                                                            | \                 | \                                                          |
| ^          | 匹配行首，例如'^dog'匹配以字符串dog开头的行（注意：awk 指令中，'^'则是匹配字符串的开始） | ^                                       | ^                                                            | ^                 | ^                                                          |
| $          | 匹配行尾，例如：'^、dog$'匹配以字符串 dog 为结尾的行（注意：awk 指令中，'$'则是匹配字符串的结尾） | $                                       | $                                                            | $                 | $                                                          |
| ^$         | 匹配空行                                                     | ^$                                      | ^$                                                           | ^$                | ^$                                                         |
| ^string$   | 匹配行，例如：'^dog$'匹配只含一个字符串 dog 的行             | ^string$                                | ^string$                                                     | ^string$          | ^string$                                                   |
| `\<`       | 匹配单词，例如：'\<frog' （等价于'\bfrog'），匹配以 frog 开头的单词 | \<                                      | \<                                                           | **不支持**        | **不支持（但可以使用\b来匹配单词，例如：'\bfrog'）**       |
| `\>`       | 匹配单词，例如：'frog\>'（等价于'frog\b '），匹配以 frog 结尾的单词 | \>                                      | \>                                                           | **不支持**        | **不支持（但可以使用\b来匹配单词，例如：'frog\b'）**       |
| `\<x\>`    | 匹配一个单词或者一个特定字符，例如：'\<frog\>'（等价于'\bfrog\b'）、'\<G\>' | \<x\>                                   | \<x\>                                                        | **不支持**        | **不支持（但可以使用\b来匹配单词，例如：'\bfrog\b'**       |
| ()         | 匹配表达式，例如：不支持'（frog）'                           | **不支持（但可以使用\(\)，如：\(dog\)** | ()                                                           | ()                | ()                                                         |
| `\(\)`     | 匹配表达式，例如：不支持'（frog）'                           | \(\)                                    | **不支持（同())**                                            | **不支持（同())** | **不支持（同())**                                          |
| ？         | 匹配前面的子表达式 0 次或 1 次（等价于{0,1}），例如：where(is)?能匹配"where" 以及"whereis" | **不支持（同\?)**                       | ？                                                           | ？                | ？                                                         |
| \?         | 匹配前面的子表达式 0 次或 1 次（等价于'\{0,1\}'），例如：'where\(is\)\? '能匹配 "where"以及"whereis" | \?                                      | **不支持（同?)**                                             | **不支持（同?)**  | **不支持（同?)**                                           |
| ?          | 当该字符紧跟在任何一个其他限制符（*, +, ?, {n},{n,}, {n,m}） 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。例如，对于字符串 "oooo"，'o+?' 将匹配单个"o"，而 'o+' 将匹配所有 'o' | **不支持**                              | **不支持**                                                   | **不支持**        | **不支持**                                                 |
| .          | 匹配除换行符（'\n'）之外的任意单个字符（注意：awk 指令中的句点能匹配换行符） | .                                       | .（如果要匹配包括“\n”在内的任何一个字符，请使用：'(^$)\|（.） | .                 | .（如果要匹配包括“\n”在内的任何一个字符，请使用：' [.\n] ' |
| *          | 匹配前面的子表达式 0 次或多次（等价于{0, }），例如：zo* 能匹配 "z"以及 "zoo" | *                                       | *                                                            | *                 | *                                                          |
| `\+`       | 匹配前面的子表达式 1 次或多次（等价于'\{1, \}'），例如：'where\(is\)\+ '能匹配 "whereis"以及"whereisis" | \+                                      | **不支持（同+)**                                             | **不支持（同+)**  | **不支持（同+)**                                           |
| +          | 匹配前面的子表达式 1 次或多次（等价于{1, }），例如：zo+能匹配 "zo"以及 "zoo"，但不能匹配 "z" | **不支持（同\+)**                       | +                                                            | +                 | +                                                          |
| {n}        | n 必须是一个 0 或者正整数，匹配子表达式 n 次，例如：zo{2}能匹配 | **不支持（同\{n\})**                    | {n}                                                          | {n}               | {n}                                                        |
| {n,}       | "zooz"，但不能匹配 "Bob"n 必须是一个 0 或者正整数，匹配子表达式大于等于 n次，例如：go{2,} | **不支持（同\{n,\})**                   | {n,}                                                         | {n,}              | {n,}                                                       |
| {n,m}      | 能匹配 "good"，但不能匹配 godm 和 n 均为非负整数，其中 n <= m，最少匹配 n 次且最多匹配 m 次 ，例如：o{1,3}将配"fooooood" 中的前三个 o（请注意在逗号和两个数之间不能有空格） | **不支持（同\{n,m\})**                  | {n,m}                                                        | {n,m}             | {n,m}                                                      |
| x\|y       | 匹配 x 或 y，例如： 不支持'z\|（food）' 能匹配 "z" 或"food"；'（z\|f）ood' 则匹配"zood" 或 "food" | **不支持（同x\|y)**                     | x\|y                                                         | x\|y              | x\|y                                                       |
| [0-9]      | 匹配从 0 到 9 中的任意一个数字字符（注意：要写成递增）       | [0-9]                                   | [0-9]                                                        | [0-9]             | [0-9]                                                      |
| [xyz]      | 字符集合，匹配所包含的任意一个字符，例如：'[abc]'可以匹配"lay" 中的 'a'（注意：如果元字符，例如：. *等，它们被放在[ ]中，那么它们将变成一个普通字符） | [xyz]                                   | [xyz]                                                        | [xyz]             | [xyz]                                                      |
| [^xyz]     | 负值字符集合，匹配未包含的任意一个字符（注意：不包括换行符），例如：'[^abc]' 可以匹配 "Lay" 中的'L'（注意：[^xyz]在awk 指令中则是匹配未包含的任意一个字符+换行符） | [^xyz]                                  | [^xyz]                                                       | [^xyz]            | [^xyz]                                                     |
| [A-Za-z]   | 匹配大写字母或者小写字母中的任意一个字符（注意：要写成递增） | [A-Za-z]                                | [A-Za-z]                                                     | [A-Za-z]          | [A-Za-z]                                                   |
| [^A-Za-z]  | 匹配除了大写与小写字母之外的任意一个字符（注意：写成递增）   | [^A-Za-z]                               | [^A-Za-z]                                                    | [^A-Za-z]         | [^A-Za-z]                                                  |
| \d         | 匹配从 0 到 9 中的任意一个数字字符（等价于 [0-9]）           | **不支持**                              | **不支持**                                                   | \d                | \d                                                         |
| \D         | 匹配非数字字符（等价于 [^0-9]）                              | **不支持**                              | **不支持**                                                   | \D                | \D                                                         |
| \S         | 匹配任何非空白字符（等价于[^\f\n\r\t\v]）                    | **不支持**                              | **不支持**                                                   | \S                | \S                                                         |
| \s         | 匹配任何空白字符，包括空格、制表符、换页符等等（等价于[ \f\n\r\t\v]） | **不支持**                              | **不支持**                                                   | \s                | \s                                                         |
| \W         | 匹配任何非单词字符 (等价于[^A-Za-z0-9_])                     | \W                                      | \W                                                           | \W                | \W                                                         |
| \w         | 匹配包括下划线的任何单词字符（等价于[A-Za-z0-9_]）           | \w                                      | \w                                                           | \w                | \w                                                         |
| \B         | 匹配非单词边界，例如：'er\B' 能匹配 "verb" 中的'er'，但不能匹配"never" 中的'er' | \B                                      | \B                                                           | \B                | \B                                                         |
| \b         | 匹配一个单词边界，也就是指单词和空格间的位置，例如： 'er\b' 可以匹配"never" 中的 'er'，但不能匹配 "verb" 中的'er' | \b                                      | \b                                                           | \b                | \b                                                         |
| \t         | 匹配一个横向制表符（等价于 \x09和 \cI）                      | **不支持**                              | **不支持**                                                   | \t                | \t                                                         |
| \v         | 匹配一个垂直制表符（等价于 \x0b和 \cK）                      | **不支持**                              | **不支持**                                                   | \v                | \v                                                         |
| \n         | 匹配一个换行符（等价于 \x0a 和\cJ）                          | **不支持**                              | **不支持**                                                   | \n                | \n                                                         |
| \f         | 匹配一个换页符（等价于\x0c 和\cL）                           | **不支持**                              | **不支持**                                                   | \f                | \f                                                         |
| \r         | 匹配一个回车符（等价于 \x0d 和\cM）                          | **不支持**                              | **不支持**                                                   | \r                | \r                                                         |
| `\\`       | 匹配转义字符本身"\"                                          | \\                                      | \\                                                           | \\                | \\                                                         |
| \cx        | 匹配由 x 指明的控制字符，例如：\cM匹配一个Control-M 或回车符，x 的值必须为A-Z 或 a-z 之一，否则，将 c 视为一个原义的 'c' 字符 | **不支持**                              | **不支持**                                                   |                   | \cx                                                        |
| \xn        | 匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长，例如：'\x41' 匹配 "A"。'\x041' 则等价于'\x04' & "1"。正则表达式中可以使用 ASCII 编码 | **不支持**                              | **不支持**                                                   |                   | \xn                                                        |
| \num       | 匹配 num，其中 num是一个正整数。表示对所获取的匹配的引用     | **不支持**                              | \num                                                         | \num              |                                                            |
| [:alnum:]  | 匹配任何一个字母或数字（[A-Za-z0-9]），例如：'[[:alnum:]] '  | [:alnum:]                               | [:alnum:]                                                    | [:alnum:]         | [:alnum:]                                                  |
| [:alpha:]  | 匹配任何一个字母（[A－Za－z]）， 例如：' [[:alpha:]] '       | [:alpha:]                               | [:alpha:]                                                    | [:alpha:]         | [:alpha:]                                                  |
| [:digit:]  | 匹配任何一个数字（[0-9]），例如：'[[:digit:]] '              | [:digit:]                               | [:digit:]                                                    | [:digit:]         | [:digit:]                                                  |
| [:lower:]  | 匹配任何一个小写字母（[a-z]）， 例如：' [[:lower:]] '        | [:lower:]                               | [:lower:]                                                    | [:lower:]         | [:lower:]                                                  |
| [:upper:]  | 匹配任何一个大写字母（[A-Z]）                                | [:upper:]                               | [:upper:]                                                    | [:upper:]         | [:upper:]                                                  |
| [:space:]  | 任何一个空白字符： 支持制表符、空格，例如：' [[:space:]] '   | [:space:]                               | [:space:]                                                    | [:space:]         | [:space:]                                                  |
| [:blank:]  | 空格和制表符（横向和纵向），例如：'[[:blank:]]'ó'[\s\t\v]'   | [:blank:]                               | [:blank:]                                                    | [:blank:]         | [:blank:]                                                  |
| [:graph:]  | 任何一个可以看得见的且可以打印的字符（注意：不包括空格和换行符等），例如：'[[:graph:]] ' | [:graph:]                               | [:graph:]                                                    | [:graph:]         | [:graph:]                                                  |
| [:print:]  | 任何一个可以打印的字符（注意：不包括：[:cntrl:]、字符串结束符'\0'、EOF 文件结束符（-1）， 但包括空格符号），例如：'[[:print:]] ' | [:print:]                               | [:print:]                                                    | [:print:]         | [:print:]                                                  |
| [:cntrl:]  | 任何一个控制字符（ASCII 字符集中的前 32 个字符，即：用十进制表示为从 0 到31，例如：换行符、制表符等等），例如：' [[:cntrl:]]' | [:cntrl:]                               | [:cntrl:]                                                    | [:cntrl:]         | [:cntrl:]                                                  |
| [:punct:]  | 任何一个标点符号（不包括：[:alnum:]、[:cntrl:]、[:space:]这些字符集） | [:punct:]                               | [:punct:]                                                    | [:punct:]         | [:punct:]                                                  |
| [:xdigit:] | 任何一个十六进制数（即：0-9，a-f，A-F）                      | [:xdigit:]                              | [:xdigit:]                                                   | [:xdigit:]        | [:xdigit:]                                                 |

### 2.支撑正则表达式的命令

#### 1.sed

> 选项
> -n		使用安靜(silent)模式。在一般 sed 的用法中，所有來自 STDIN 的資料一般都會被列出到螢幕上。但如果加上 -n 參數後，則只有經過 sed 特殊處理的那一行(或者動作)才會被列出來
>
> -e		默认启用，直接在命令上进行编辑，如果一个sed命令中有两个以上的动作，在每个动作前都要加-e（理解为直接对从管道后获得的标准输入进行处理）
>
> -f file	file为sed动作的文本文件，动作里不需要'"单双引号，sed执行file中的sed动作
>
> -i		直接修改文件而不是标准输入
>
> -r		使用EREs(默认是BREs)
> 动作
>
> d		删除,例子:
>
> 			'2,5d' 删除2到5行	'2d' 删除第二行	'3,$d' 删除3到最后一行	'/^$/d' 删除空白行
>
> a	向下新增行,例子:
>
> 			'2a drink tea'	在第二行下增加一行
>				
> 			'2a drink tea\回车drink beer'	在第二行下新增两行
>				
> 			'/str1/a\str2'	在存在str1字符串的行后新加一行str2
>
> i		向上插入行	和a一样用
>
> p		打印，一般和sed -n连用,例子:
>
> 			sed -n '5,7p'	打印出第5到7行
>
> c str	替换行,例子:
>
> 			'2,5c No 2-5 number'	将第2到5行替换为这个字符串
>
> s		替换字符,例子:
>
> 			sed 's/要被取代的字符串/新的字符串/g'	替换所有字符串
>				
> 			sed '2,5s/要被取代的字符串/新的字符串/g'	替换2到5行的字符串
>
> sed的动作表达式中行的表示方法,下面以动作d为例来说明
>
> 默认情况匹配所有行,比如
>
> 		sed 'd' xxx.txt	将不打印任何内容,因为它匹配了所有行并删除了它们
>
> 可以直接用数字表示行,$表示最后一行
>
> 		sed '3d' xxx.txt	删除第三行
>				
> 		sed '$d' xxx.txt	删除最后一行
>
> 按字符匹配某行
>
> 		sed '/aa/d' xxx.txt	删除包含aa的行
>
> 使用逗号,连接两个不同的行
>
> 		sed '2,5d' xxx.txt	删除第二行到第五行
>				
> 		sed '3,$d' xxx.txt	删除第三行到最后一行
>				
> 		sed '/aa/,13d' xxx.txt	删除第一次匹配到aa的行到(如果前13行没有出现aa字符,将删除13行之后匹配的aa字符行)
>				
> 		sed '/aa/,/aaa/d' xxx.txt	删除第一次匹配到aa的行到第一次匹配到aaa的行,同时删除第一次匹配到aaa行后所有行
>				
> 		sed '/aa/,+2d' xxx.txt	删除匹配到aa的行和它下面的两行

在sed命令中使用变量

> 方法一:使用单引号,变量处使用单引号+双引号把变量包括起来
>
> ```shell
> #!/bin/bash
> name=tomas
> sed -i 's/rose/'"${name}"'/g' b.txt
> ```
>
> 方式二:使用双引号,变量直接引用即可
>
> ```shell
> #!/bin/bash
> name=tomas
> sed -i "s/rose/${name}/g" name.txt
> ```
>
> 方式三:使用单引号,变量直接引用,但是需要通过 eval 执行这个sed命令.eval会对后面Shell命令进行两遍扫描,如果第一遍扫描后,Shell命令是个普通命令,则执行此命令;如果Shell命令是含有变量的间接引用,则保证间接引用的语义
>
> ```shell
> #!/bin/bash
> name=tomas
> eval sed -i 's/rose/${name}/g' name.txt
> ```
>
> 注意:如果变量中有/符号,会影响sed命令后引号内容的解析,比如
>
> ```shell
> #在文本的最后一行追加“/dev/sdb1”字符串
> sd_path="/dev/sdb1"
> sed -i '$ s/$/'"${sd_path}"'/' data.txt
> #会提示sed后面的表达式错误,因为将变量替换后,sed表达式变为:
> sed -i '$ s/$/dev/sdb1//' data.txt
> ```

#### 2.awk

	awk默认使用EREs,它的功能太强大了,此工具的用法可以写一本书,这里只摘录《鸟哥的linux私房菜中的用法》
	
	awk是以行为单位，处理不同列的工具

> $0	代表一行的字符
>
> $1	代表一行的第一列字符
>
> $2	代表一行的第二列字符
>
> ...
>
> NF	一行拥有的列数
>
> NR	当前的行数
>
> FS	分隔符，默认为空格和tab
>
> BEGIN	第一行
>
> END	最后一行

举例说明:

```shell
last -n 5 | awk '{print $1 "\t" $3}'	#输出last命令的第1、3列字符
last -n 5| awk '{print $1 "\t lines: " NR "\t columns: " NF}'	#输出第一列字符及行号和每行的列数
cat /etc/passwd | awk '{FS=":"} $3 < 10 {print $1 "\t " $3}'	#以:为分隔符，当第三列小于10时，输出passwd文件的的第一列及第三列，但是awk中变量的定义应该是从第二行生效
cat /etc/passwd | awk 'BEGIN {FS=":"} $3 < 10 {print $1 "\t " $3}'	#和上面一样，但是加入了BEGIN，说明从第一行开始生效
echo a,b,c|awk -F","  '{print $1}'	#以，为分隔符，输出第一个字符
echo "abc" |awk -F "" '{print NF}'	#以空为分隔符，输出字符串长度
echo “Alex”|awk '{print length($0)}'	#输出这一行字符串长度
cat pay.txt
Name    1st     2nd     3th
VBird   23000   24000   25000
DMTsai  21000   20000   23000
Bird2   43000   42000   41000
cat pay.txt | \
> awk 'NR==1{printf "%10s %10s %10s %10s %10s\n",$1,$2,$3,$4,"Total" }
> NR>=2{total = $2 + $3 + $4
> printf "%10s %10d %10d %10d %10.2f\n", $1, $2, $3, $4, total}'
      Name        1st        2nd        3th      Total
     VBird      23000      24000      25000   72000.00
    DMTsai      21000      20000      23000   64000.00
     Bird2      43000      42000      41000  126000.00
#如果在{}内有多步运算，一定要用;或者换行隔开，printf语句中，必须用\n才能换行，awk语句中变量前不需要加$符号
cat pay.txt | \
> awk '{if(NR==1) printf "%10s %10s %10s %10s %10s\n",$1,$2,$3,$4,"Total"}
> NR>=2{total = $2 + $3 + $4
> printf "%10s %10d %10d %10d %10.2f\n", $1, $2, $3, $4, total}'
#和上面的一个意思

#awk去除文件中的重复行
lzh@lzh-ws:test$ cat dup 
hello world
awk
coding ants
hello world
awk
hello world
awk
coding ants
coding ants
lzh@lzh-ws:test$ awk '!a[$0]++' dup
hello world
awk
coding ants
#在<awk程序指令模型>中介绍了awk的程序指令由模式和操作组成，即Pattern { Action }的形式，如果省略Action，则默认执行print $0的操作,这里的Pattern就是"!a[$0]++",这里没有定义Action,所以这里Action就是print $0
#在awk中，对于未初始化的数组变量，在进行数值运算的时候，会赋予初值0，因此a[$0]=0，++运算符的特性是先取值，后加1，因此Pattern等价于!0,即为1,所以默认执行print $0
#之后a[$0]就等于1了,所以,遇到相同行,a[$0]就为正数,!a[$0]++就为假,就不会执行print $0了

#统计文本里第三列出现的次数,并以输出结果的第一列排序
cat txt | awk '{a[$3]++}END{for(i in a){print i,a[i] | "sort -k 1"}}'
```

#### 3.printf

字符打印命令，用法和c语言中类似

例子:

```shell
printf '%10s %5i %5i %5i %8.2f \n' $(cat printf.txt | grep -v Name)
```



### 3.扩展正则表达式

#### 1.egrep

等于grep -E,使用EREs

ER字符	意义

`+`		重复一个或一个以上前一个字符

`?`		0个或1个前一个字符

`|`		or（或）	egrep -n 'gd|good' regular_express.txt

`()`		找出群组字符串	egrep -n 'g(la|oo)d' regular_express.txt

`()+`	多个重复字符串	echo 'AxyzxyzxyzxyzC' | egrep 'A(xyz)+C'



### 4.默认不支持正则表达式的命令使用支持正则表达式的选项

find命令的-name选项后的参数,是不支持正则表达式的,可以使用-iregex选项,后面跟的字符串就可以支持正则表达式





## 参考连接

[awk使用案例：通过awk去除重复行](http://www.letuknowit.com/topics/20120401/use-awk-remove-duplicate-lines.html/)

[linux shell 正则表达式(BREs,EREs,PREs)差异比较](https://www.cnblogs.com/chengmo/archive/2010/10/10/1847287.html)
